# Power BI Manual Install Steps  

At this point you have a fully deployed and running solution. Congratulations! 


## What did I deploy?
A `data generator` is running in your account that simulates browsing and purchase patterns for a population of users. The data generator will send 7500 semi-random events into an EventHub every 15 minutes for about an hour.

A `Stream Analytics` job monitors the EventHub for new events and uses a SQL-like statement to apply aggregations on the data over a tumbling window. Aggregations from this job are written to a CSV file residing as a blob in Azure Storage.

Every 15 minutes, a `Data Factory` pipeline initiates a `Spark` job that extracts the aggregations, joins them with historical data, and then loads them into a SQL Data Warehouse. A second Data Factory pipeline initiates a `Spark` job that applies a scoring algorithm against that data set to predict whether a particular customer is likely to make a purchase in the next 30 days, and if so, the product category most likely to be purchased. Output from this scoring job is stored as a CSV file in Blob Storage where it can be visualized using `Power BI`.

## What's next?
In about 15 to 30 minutes, your first slice of data will be ready to be visualized.

> Please ensure that you have installed the **latest** [Power BI Desktop][1] before continuing with this section.  
> *Recommended version is 2.47 or newer.*

1. Download the [Power BI template][6] for this solution
1. Double click the pbix file to open in Power BI  
    - *If Power BI prompts you to upgrade, please follow the guided instructions in the Power BI app before continuing*
    - *The template is seeded with sample static data. Feel free to explore the visualizations before attaching the data from your solution.*
1. Update the Power BI data source to point to the data generated by your solution
    - From the Home section on the Power BI ribbon, click `Edit Queries` -> `Data source settings`
    - You will see the static CSV data source for this template
    - Click `Change source` and change the URL to the value of `outputCsvUrl`: Gotten towards the end of [Step #6][LINK_STEP_6] during the manual deployment.  
    - *If you see an option to select an Authentication method, choose anonymous and use the default level.*
    - Click `Apply changes` on the Power BI notification panel to update all visualizations
    - **Note** The CSV file will contain 0 rows until the first set of data has completed the processing pipeline.
    - Save the report by clicking `File` -> `Save` in the Power BI ribbon
1. (optional) Publish your report to Power BI online
    > Publishing to Power BI requires an active Office 365 account

    - From the Home section on the Power BI ribbon, click `Publish`.  
    *For detailed instructions, see [Publishing from Power BI Desktop][2]*.
    - To create a new dashboard in Power BI Online, click the `+` icon next to the "Dashboards" section on the left pane of the web page. Name your dashboard "Customer 360 Profile".

## Solution Details
For technical details and customization notes, see the [Solution Guide][5] on GitHub.

## Clean up 
You will be charged for running this solution in Azure. To avoid incurring charges, please remove the deployment after you have completed the tutorial deployment and evaluation.

To view and remove any existing deployments of this solution, please visit the [Cortana Intelligence Portal][4].

[1]: https://go.microsoft.com/fwlink/?LinkId=521662&clcid=0x409
[2]: https://ciqsdatastorage.blob.core.windows.net/customer-360/customer360-landscape.pbix
[3]: https://portal.azure.com/
[4]: https://start.cortanaintelligence.com/Deployments?type=customer-360
[5]: https://github.com/Azure/cortana-intelligence-customer-profile-enrichment-solution
[6]: https://bostondata.blob.core.windows.net/customer-360/customer360-landscape.pbix
[LINK_STEP_6]: https://github.com/Azure/cortana-intelligence-customer360/blob/master/Technical%20Deployment%20Guide/docs/deployment.md#step-6
